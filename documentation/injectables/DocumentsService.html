<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>dc-admin documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">dc-admin documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>DocumentsService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/documents.service.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Service that manages the document data as well as all the requests for retrieving and saving documents.</p>

            </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#documentsInformation">documentsInformation</a>
                            </li>
                            <li>
                                <a href="#documentsInformationSubject">documentsInformationSubject</a>
                            </li>
                            <li>
                                <a href="#noImportedDocumentSubject">noImportedDocumentSubject</a>
                            </li>
                            <li>
                                <a href="#numberImportPdfs">numberImportPdfs</a>
                            </li>
                            <li>
                                <a href="#pdfSubject">pdfSubject</a>
                            </li>
                            <li>
                                <a href="#returnHeaders">returnHeaders</a>
                            </li>
                            <li>
                                <a href="#scannCurrentCount">scannCurrentCount</a>
                            </li>
                            <li>
                                <a href="#scannCurrentCountSubject">scannCurrentCountSubject</a>
                            </li>
                            <li>
                                <a href="#scannedPdfSubject">scannedPdfSubject</a>
                            </li>
                            <li>
                                <a href="#scannTotalCountSubject">scannTotalCountSubject</a>
                            </li>
                            <li>
                                <a href="#serverUrl">serverUrl</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#addToDocumentInformationArray">addToDocumentInformationArray</a>
                            </li>
                            <li>
                                <a href="#createNewInstitution">createNewInstitution</a>
                            </li>
                            <li>
                                <a href="#getAvailableInstitutions">getAvailableInstitutions</a>
                            </li>
                            <li>
                                <a href="#getDocumentPDF">getDocumentPDF</a>
                            </li>
                            <li>
                                <a href="#getDocumentPDFByID">getDocumentPDFByID</a>
                            </li>
                            <li>
                                <a href="#getDocumentsInformation">getDocumentsInformation</a>
                            </li>
                            <li>
                                <a href="#importDocuments">importDocuments</a>
                            </li>
                            <li>
                                <a href="#importProcessFinished">importProcessFinished</a>
                            </li>
                            <li>
                                <a href="#saveDocument">saveDocument</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(http: <a href="https://angular.io/api/common/http/HttpClient" target="_blank">HttpClient</a>, authService: <a href="../injectables/AuthService.html">AuthService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="30" class="link-to-prism">src/app/documents.service.ts:30</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>http</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://angular.io/api/common/http/HttpClient" target="_blank" >HttpClient</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>authService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/AuthService.html" target="_self" >AuthService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addToDocumentInformationArray"></a>
                    <span class="name">
                        <b>
                            addToDocumentInformationArray
                        </b>
                        <a href="#addToDocumentInformationArray"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>addToDocumentInformationArray(document: <a href="../classes/DocumentBP.html">DocumentBP</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="217"
                            class="link-to-prism">src/app/documents.service.ts:217</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>helper function that adds a document to the documents array.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>document</td>
                                    <td>
                                                <code><a href="../classes/DocumentBP.html" target="_self" >DocumentBP</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>the document that should be added to the array</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createNewInstitution"></a>
                    <span class="name">
                        <b>
                            createNewInstitution
                        </b>
                        <a href="#createNewInstitution"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>createNewInstitution(institutionName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="121"
                            class="link-to-prism">src/app/documents.service.ts:121</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>adds a new institution to the database. So far no delete functionality implemented.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>institutionName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>name of the institution that the user wants to add to the database</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAvailableInstitutions"></a>
                    <span class="name">
                        <b>
                            getAvailableInstitutions
                        </b>
                        <a href="#getAvailableInstitutions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getAvailableInstitutions()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="105"
                            class="link-to-prism">src/app/documents.service.ts:105</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>retrieves the institutions that the user has already entered. These institutions can then be assigned when entering
the information for new documents that have been scanned.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDocumentPDF"></a>
                    <span class="name">
                        <b>
                            getDocumentPDF
                        </b>
                        <a href="#getDocumentPDF"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getDocumentPDF(documentID: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="173"
                            class="link-to-prism">src/app/documents.service.ts:173</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>documentID</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDocumentPDFByID"></a>
                    <span class="name">
                        <b>
                            getDocumentPDFByID
                        </b>
                        <a href="#getDocumentPDFByID"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getDocumentPDFByID(documentID: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="194"
                            class="link-to-prism">src/app/documents.service.ts:194</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>requesting a document as pdf given its documentID</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>documentID</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>the id of the document the user clicked on in the docuents table</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDocumentsInformation"></a>
                    <span class="name">
                        <b>
                            getDocumentsInformation
                        </b>
                        <a href="#getDocumentsInformation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getDocumentsInformation()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="142"
                            class="link-to-prism">src/app/documents.service.ts:142</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>retrieves the information of all documents in the database and adds it to an array.
This array is the used in the Doc-list component to display the documents data in a table.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="importDocuments"></a>
                    <span class="name">
                        <b>
                            importDocuments
                        </b>
                        <a href="#importDocuments"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>importDocuments()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="40"
                            class="link-to-prism">src/app/documents.service.ts:40</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>starts the import of new documents and sets current file count.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="importProcessFinished"></a>
                    <span class="name">
                        <b>
                            importProcessFinished
                        </b>
                        <a href="#importProcessFinished"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>importProcessFinished()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="95"
                            class="link-to-prism">src/app/documents.service.ts:95</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="saveDocument"></a>
                    <span class="name">
                        <b>
                            saveDocument
                        </b>
                        <a href="#saveDocument"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>saveDocument(document: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank">object</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="72"
                            class="link-to-prism">src/app/documents.service.ts:72</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>sends the data that should be saved for the current document to the server
In current implementation it will not detect if new documents are scanned when die import
process has already started. If the import started with 8 documents it will stop afterwards.
In order to scan newly scanned documents the import process has to be started again.
This design decision can be modified later.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>document</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="documentsInformation"></a>
                        <span class="name">
                            <b>
                            documentsInformation</b>
                            <a href="#documentsInformation"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../classes/DocumentBP.html" target="_self" >DocumentBP[]</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>[]</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="21" class="link-to-prism">src/app/documents.service.ts:21</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="documentsInformationSubject"></a>
                        <span class="name">
                            <b>
                            documentsInformationSubject</b>
                            <a href="#documentsInformationSubject"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new Subject()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="19" class="link-to-prism">src/app/documents.service.ts:19</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="noImportedDocumentSubject"></a>
                        <span class="name">
                            <b>
                            noImportedDocumentSubject</b>
                            <a href="#noImportedDocumentSubject"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new Subject()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="30" class="link-to-prism">src/app/documents.service.ts:30</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="numberImportPdfs"></a>
                        <span class="name">
                            <b>
                            numberImportPdfs</b>
                            <a href="#numberImportPdfs"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="25" class="link-to-prism">src/app/documents.service.ts:25</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="pdfSubject"></a>
                        <span class="name">
                            <b>
                            pdfSubject</b>
                            <a href="#pdfSubject"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new Subject()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="23" class="link-to-prism">src/app/documents.service.ts:23</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="returnHeaders"></a>
                        <span class="name">
                            <b>
                            returnHeaders</b>
                            <a href="#returnHeaders"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>{}</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="17" class="link-to-prism">src/app/documents.service.ts:17</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="scannCurrentCount"></a>
                        <span class="name">
                            <b>
                            scannCurrentCount</b>
                            <a href="#scannCurrentCount"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>0</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="28" class="link-to-prism">src/app/documents.service.ts:28</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="scannCurrentCountSubject"></a>
                        <span class="name">
                            <b>
                            scannCurrentCountSubject</b>
                            <a href="#scannCurrentCountSubject"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new Subject()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="29" class="link-to-prism">src/app/documents.service.ts:29</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="scannedPdfSubject"></a>
                        <span class="name">
                            <b>
                            scannedPdfSubject</b>
                            <a href="#scannedPdfSubject"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new Subject()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="26" class="link-to-prism">src/app/documents.service.ts:26</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="scannTotalCountSubject"></a>
                        <span class="name">
                            <b>
                            scannTotalCountSubject</b>
                            <a href="#scannTotalCountSubject"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new Subject()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="27" class="link-to-prism">src/app/documents.service.ts:27</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="serverUrl"></a>
                        <span class="name">
                            <b>
                            serverUrl</b>
                            <a href="#serverUrl"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>&#x27;http://localhost:3000&#x27;</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="15" class="link-to-prism">src/app/documents.service.ts:15</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { HttpClient, HttpHeaders } from &#x27;@angular/common/http&#x27;;
import { Subject } from &#x27;rxjs&#x27;;
import { DocumentBP } from &#x27;./datamodel/documentBP.model&#x27;;
import { AuthService } from &#x27;./auth/auth.service&#x27;;

// let pdfBlob: Blob;

/**
 * Service that manages the document data as well as all the requests for retrieving and saving documents.
 */
@Injectable()
export class DocumentsService {

    serverUrl &#x3D; &#x27;http://localhost:3000&#x27;;

    returnHeaders &#x3D; {};
    // stores information about all the documents sent by server
    documentsInformationSubject &#x3D; new Subject();
    // holds information about all documents
    documentsInformation: DocumentBP[] &#x3D; [];

    pdfSubject &#x3D; new Subject();

    numberImportPdfs: number;
    scannedPdfSubject &#x3D; new Subject();
    scannTotalCountSubject &#x3D; new Subject();
    scannCurrentCount &#x3D; 0;
    scannCurrentCountSubject &#x3D; new Subject();
    noImportedDocumentSubject &#x3D; new Subject();


    constructor(private http: HttpClient, private authService: AuthService) {

    }

    /**
     *  starts the import of new documents and sets current file count.
     */
    importDocuments() {
      const accessToken &#x3D; this.authService.getToken();
      const headers &#x3D; new HttpHeaders({
              &#x27;x-access-token&#x27;: accessToken,
      });
      this.http.get(this.serverUrl + &#x27;/importDocuments&#x27;,
                    {headers, responseType: &#x27;arraybuffer&#x27; as &#x27;json&#x27;, observe: &#x27;response&#x27; })
      .subscribe(
          (response) &#x3D;&gt; {
              // console.log(response);
              console.log(&#x27;File Count: &#x27; + response.headers.get(&#x27;filecount&#x27;));
              // const keys &#x3D; response.headers.keys();
              // this.returnHeaders &#x3D; keys.map(key &#x3D;&gt;
              // &#x60;${key}: ${response.headers.get(key)}&#x60;);

              this.scannedPdfSubject.next(response.body);
              this.scannTotalCountSubject.next(response.headers.get(&#x27;filecount&#x27;));
              this.scannCurrentCount &#x3D; 0;
              this.scannCurrentCountSubject.next(this.scannCurrentCount);
              this.noImportedDocumentSubject.next(false);
            },
            (error) &#x3D;&gt; console.log(error)
      );
    }

    /**
     * sends the data that should be saved for the current document to the server
     * In current implementation it will not detect if new documents are scanned when die import
     * process has already started. If the import started with 8 documents it will stop afterwards.
     * In order to scan newly scanned documents the import process has to be started again.
     * This design decision can be modified later.
     */
    saveDocument(document: object) {
        const accessToken &#x3D; this.authService.getToken();
        const headers &#x3D; new HttpHeaders({
            &#x27;Access-Control-Allow-Origin&#x27;: &#x27;*&#x27;,
            &#x27;content-type&#x27;: &#x27;application/json&#x27;,
            &#x27;x-access-token&#x27;: accessToken
          });

        this.http.post(this.serverUrl + &#x27;/currentDocumentData&#x27;, document,
                      {headers, responseType: &#x27;arraybuffer&#x27; as &#x27;json&#x27;, observe: &#x27;response&#x27;})
        .subscribe(
            (response) &#x3D;&gt; {
              this.scannedPdfSubject.next(response.body);
              console.log(response.headers.get(&#x27;filecount&#x27;));
              // this.scannTotalCountSubject.next(response.headers.get(&#x27;filecount&#x27;));
              this.scannCurrentCount++;
              this.scannCurrentCountSubject.next(this.scannCurrentCount);
            },
            (error) &#x3D;&gt; console.log(error)
        );

    }

    importProcessFinished() {
      this.scannCurrentCount &#x3D; 0;
      this.scannTotalCountSubject.next(0);
      this.noImportedDocumentSubject.next(true);
    }

    /**
     * retrieves the institutions that the user has already entered. These institutions can then be assigned when entering
     * the information for new documents that have been scanned.
     */
    getAvailableInstitutions() {
        const accessToken &#x3D; this.authService.getToken();
        const httpOptions &#x3D; {
            headers: new HttpHeaders({
              responseType:  &#x27;application/json&#x27;,
            //   &#x27;Authorization&#x27;: &#x27;my-auth-token&#x27;,
              &#x27;x-access-token&#x27;: accessToken
            })
        };
        return this.http.get(this.serverUrl + &#x27;/institutions&#x27;, httpOptions);
    }

    /**
     * adds a new institution to the database. So far no delete functionality implemented.
     * @param institutionName name of the institution that the user wants to add to the database
     */
    createNewInstitution(institutionName: string) {

        const accessToken &#x3D; this.authService.getToken();
        const httpOptions &#x3D; {
            headers: new HttpHeaders({
              responseType:  &#x27;application/json&#x27;,
            //   &#x27;Authorization&#x27;: &#x27;my-auth-token&#x27;,
              &#x27;x-access-token&#x27;: accessToken
            })
        };
        this.http.post(this.serverUrl + &#x27;/createInstitution&#x27;, {institution: institutionName}, httpOptions)
        .subscribe(
          (response) &#x3D;&gt; console.log(response),
          (error) &#x3D;&gt; console.log(error)
        );
    }

    /**
     * retrieves the information of all documents in the database and adds it to an array.
     * This array is the used in the Doc-list component to display the documents data in a table.
     */
    getDocumentsInformation() {
        class ReturnObjectFormat {
            documentInfo: DocumentBP[];
        }

        // getting auth information required for the request
        const accessToken &#x3D; this.authService.getToken();
        const httpOptions &#x3D; {
            headers: new HttpHeaders({
              responseType:  &#x27;application/json&#x27;,
            //   &#x27;Authorization&#x27;: &#x27;my-auth-token&#x27;,
              &#x27;x-access-token&#x27;: accessToken
            })
        };
        // remove all elements of array before loading documentInfo. Otherwise would be duplicated.
        this.documentsInformation &#x3D; [];

        this.http.get&lt;ReturnObjectFormat&gt;(this.serverUrl + &#x27;/documents&#x27;, httpOptions)
        .subscribe(
            (response) &#x3D;&gt; {
                response.documentInfo.forEach((document: DocumentBP) &#x3D;&gt; {
                    this.addToDocumentInformationArray(document);
                });
                this.documentsInformationSubject.next(this.documentsInformation);
            },
            (error) &#x3D;&gt; console.log(error)
        );

    }

    // not used anymore. Was used before ID functionality was implemented in backend.
    getDocumentPDF(documentID: number) {

        const accessToken &#x3D; this.authService.getToken();
        const headers &#x3D; new HttpHeaders({
              &#x27;x-access-token&#x27;: accessToken,
        });

        this.http.get(this.serverUrl + &#x27;/document&#x27;, {headers, responseType: &#x27;arraybuffer&#x27; as &#x27;json&#x27;})
        .subscribe(
            (response) &#x3D;&gt; {
                this.pdfSubject.next(response);
                console.log(response);
              },
              (error) &#x3D;&gt; console.log(error)
            );
    }

    /**
     * requesting a document as pdf given its documentID
     * @param documentID the id of the document the user clicked on in the docuents table
     */
    getDocumentPDFByID(documentID: number) {

        const accessToken &#x3D; this.authService.getToken();
        const headers &#x3D; new HttpHeaders({
              &#x27;x-access-token&#x27;: accessToken,
        });

        const requestString &#x3D; this.serverUrl + &#x27;/documentPDF/&#x27; + documentID;

        this.http.get(requestString, {headers, responseType: &#x27;arraybuffer&#x27; as &#x27;json&#x27;})
        .subscribe(
            (response) &#x3D;&gt; {
                this.pdfSubject.next(response);
                console.log(response);
              },
              (error) &#x3D;&gt; console.log(error)
            );
    }

    /**
     * helper function that adds a document to the documents array.
     * @param document the document that should be added to the array
     */
    addToDocumentInformationArray(document: DocumentBP) {
      const addingDocument &#x3D; new DocumentBP(
        document.id,
        document.year,
        document.month,
        document.institution,
        document.title,
        document.importance,
        document.description);
      this.documentsInformation.push(addingDocument);
    }
}
</code></pre>
    </div>

</div>







                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'DocumentsService.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
